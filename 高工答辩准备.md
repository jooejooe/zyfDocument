## 高工答辩准备





### 数据库

- 一条sql执行过长的时间，你如何优化，从哪些方面？

> 1、查看sql是否涉及多表的联表或者子查询，如果有，看是否有必要。
>
> 2、如果以上两种都不能操作，非要链表查询，那么考虑对相对应的查询条件做索引。加快查询速度
>
> 6、explain分析sql语句，查看执行计划，分析索引是否用上，分析扫描行数等等
>
> 7、索引是否存在，是否失效

- 分库原则

- 分表原则（垂直、水平）      

- 表设计、冗余设计、字段设计、增量设计、主键生成规则、外键设计、索引设计    

- 触发器使用原则

  只能在当前数据库中创建触发器。

  1、虽然不能在临时数据表上创建触发器，但是触发器可以引用临时数据表。

  2、不能在系统数据表创建触发器，也不可以引用系统数据库。

  3、在包含使用delete或updata操作定义中，不能定义instead of和instead of update触发器。

  4、TRUNCATE TABLE语句不会引发Delete触发器，因为该语句没有被记入日志。

  5、Writetext语句不会引发insert或update触发器

  注意：当创建一个触发器时必须指定：名称；在其上定义触发器的表；触发器将何时激发；激活触发器的数据修

- 存储过程使用原则 
        1.  当一个业务同时对多个表进行处理的时候采用存储过程比较合适。
          2. 复杂的数据处理用存储过程比较合适，如有些报表处理。
          3. 多条件多表联合查询，并做分页处理，用存储过程也比较适合。
          4. 使用存储过程，等需求变动，需要维护的时候，麻烦就来了。不应该大规模使用。
          5. 适当的使用存储过程，能够提高我们SQL查询的性能，以便于提高我们的工作效率。

- 开发配置相关要求

- abase索引类型(飞雄数据库的高级培训)

  B-tree, Hash, GiST, SP-GiST, GIN and BRIN。



### 类设计

1. 单一职责

2. 开-闭

3. 里氏替换

   >
   >  定义：所有引用基类的地方必须能透明地使用其子类的对象。
   >

4. 依赖倒置

   >  高层模块不应该依赖低层模块，两者都应该依赖抽象
   >  抽象不应该依赖细节
   >  细节应该依赖抽象

5. 接口分离

   > 客户端不应该依赖它不需要的接口
   >
   > 类间的依赖关系应该建立在最小的接口上
   >
   > 最小接口依赖

6. 迪米特原则

   > 迪米特原则的核心观念就是类间解耦，弱耦合，只有弱耦合后，类的复用率才可以提高





## 多线程

1. 什么是线程？

2. 什么是线程安全和线程不安全？

3. 什么是自旋锁？

   > 是指当一个线程在获取锁的时候，如果锁已经被其它线程获取，那么该线程将循环等待，然后不断的判断锁是否能够被成功获取，直到获取到锁才会退出循环。
   >
   > 获取锁的线程一直处于活跃状态，但是并没有执行任何有效的任务，使用这种锁会造成[busy-waiting](https://en.wikipedia.org/wiki/Busy_waiting)。

4. 什么是Java内存模型？

5. 什么是CAS？(LMAX Disruptor )

   > **CAS算法** 即compare and swap（比较与交换），是一种有名的无锁算法。无锁编程，即不使用锁的情况下实现多线程之间的变量同步，也就是在没有线程被阻塞的情况下实现变量的同步，所以也叫非阻塞同步（Non-blocking Synchronization）。CAS算法涉及到三个操作数
   >
   > - 需要读写的内存值 V
   > - 进行比较的值 A
   > - 拟写入的新值 B
   >
   > 当且仅当 V 的值等于 A时，CAS通过原子方式用新值B来更新V的值，否则不会执行任何操作（比较和替换是一个原子操作）

6. 什么是乐观锁和悲观锁？

7. 什么是AQS？

8. 什么是原子操作？在Java Concurrency API中有哪些原子类(atomic classes)？

9. 什么是Executors框架？

10. 什么是阻塞队列？如何使用阻塞队列来实现生产者-消费者模型？

11. 什么是Callable和Future?

12. 什么是FutureTask?

13. 什么是同步容器和并发容

14. 器的实现？

15. 什么是多线程？优缺点？

16. 什么是多线程的上下文切换？

17. ThreadLocal的设计理念与作用？

18. ThreadPool（线程池）用法与优势？

19. Concurrent包里的其他东西：ArrayBlockingQueue、CountDownLatch等等。

20. synchronized和ReentrantLock的区别？

21. Semaphore有什么作用？

22. Java Concurrency API中的Lock接口(Lock interface)是什么？对比同步它有什么优势？

23. Hashtable的size()方法中明明只有一条语句”return count”，为什么还要做同步？

24. ConcurrentHashMap的并发度是什么？

25. ReentrantReadWriteLock读写锁的使用？

26. CyclicBarrier和CountDownLatch的用法及区别？

27. LockSupport工具？

28. Condition接口及其实现原理？

29. Fork/Join框架的理解?

30. wait()和sleep()的区别?

31. 线程的五个状态（五种状态，创建、就绪、运行、阻塞和死亡）?

32. start()方法和run()方法的区别？

33. Runnable接口和Callable接口的区别？

34. volatile关键字的作用？

35. Java中如何获取到线程dump文件？

36. 线程和进程有什么区别？

37. 线程实现的方式有几种（四种）？

38. 高并发、任务执行时间短的业务怎样使用线程池？并发不高、任务执行时间长的业务怎样使用线程池？并发

39. 高、业务执行时间长的业务怎样使用线程池？

40. 如果你提交任务时，线程池队列已满，这时会发生什么？

41. 锁的等级：方法锁、对象锁、类锁?

42. 如果同步块内的线程抛出异常会发生什么？

43. 并发编程（concurrency）并行编程（parallellism）有什么区别？

44. 如何保证多线程下 i++ 结果正确？

45. 一个线程如果出现了运行时异常会怎么样?

46. 如何在两个线程之间共享数据?

47. 生产者消费者模型的作用是什么?

48. 怎么唤醒一个阻塞的线程?

49. Java中用到的线程调度算法是什么

50. 单例模式的线程安全性?

51. 线程类的构造方法、静态块是被哪个线程调用的?

52. 同步方法和同步块，哪个是更好的选择?

53. 如何检测死锁？怎么预防死锁？





## 性能设计

1. 缓存及缓存层；
2. 采用多线程；
3. 实施负载平衡；
4. 对数据库进行优化；
5. 文件系统优化；
6. 代码性能优化；
7. 应用层功能改造（分页、运算分离、惰性加载）
8. 系统的调优过程以及思路



## 算法

> 水哥算法课ppt



## 综合

1. 如何优化现场环境系统响应变慢？
2. 如何解决现场内存，cpu 占用过高（100%）的问题？